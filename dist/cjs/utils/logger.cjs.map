{"version":3,"file":"logger.cjs","sources":["../../../../src/utils/logger.ts"],"sourcesContent":["import * as fs from 'fs';\r\nimport * as  path from 'path';\r\nimport { IncomingMessage } from 'http';\r\nimport { LoggerOptions } from '..';\r\n\r\nexport class Logger {\r\n  private logFilePath: string | null;\r\n\r\n  constructor(options: LoggerOptions = {}) {\r\n    this.logFilePath = options.logFilePath || null;\r\n\r\n    if (this.logFilePath) {\r\n      try {\r\n        const logDir = path.dirname(this.logFilePath);\r\n        if (!fs.existsSync(logDir)) {\r\n          fs.mkdirSync(logDir, { recursive: true });\r\n        }\r\n        fs.accessSync(this.logFilePath, fs.constants.W_OK | fs.constants.R_OK);\r\n      } catch (error) {\r\n        console.error(\r\n          `Logger initialization failed for path: ${this.logFilePath} - ${(error as Error).message}`\r\n        );\r\n        this.logFilePath = null;\r\n      }\r\n    }\r\n  }\r\n\r\n  log(message: string): void {\r\n    const logMessage = `[${new Date().toISOString()}] ${message}`;\r\n    console.log(logMessage);\r\n\r\n    if (this.logFilePath) {\r\n      fs.appendFile(this.logFilePath, `${logMessage}\\n`, (err) => {\r\n        if (err) {\r\n          console.error(`Failed to write to log file: ${err.message}`);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  logRequest(req: IncomingMessage): void {\r\n    const { method, url } = req;\r\n    this.log(`${method} ${url}`);\r\n  }\r\n}"],"names":["path","fs"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;MAKa,MAAM,CAAA;AACT,IAAA,WAAW,CAAgB;AAEnC,IAAA,WAAA,CAAY,UAAyB,EAAE,EAAA;QACrC,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,IAAI,IAAI,CAAC;QAE/C,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,IAAI;gBACF,MAAM,MAAM,GAAGA,eAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAC9C,gBAAA,IAAI,CAACC,aAAE,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE;oBAC1BA,aAAE,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;AAC3C,iBAAA;AACD,gBAAAA,aAAE,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,EAAEA,aAAE,CAAC,SAAS,CAAC,IAAI,GAAGA,aAAE,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;AACxE,aAAA;AAAC,YAAA,OAAO,KAAK,EAAE;AACd,gBAAA,OAAO,CAAC,KAAK,CACX,CAAA,uCAAA,EAA0C,IAAI,CAAC,WAAW,CAAA,GAAA,EAAO,KAAe,CAAC,OAAO,CAAA,CAAE,CAC3F,CAAC;AACF,gBAAA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;AACzB,aAAA;AACF,SAAA;KACF;AAED,IAAA,GAAG,CAAC,OAAe,EAAA;AACjB,QAAA,MAAM,UAAU,GAAG,CAAI,CAAA,EAAA,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAA,EAAA,EAAK,OAAO,CAAA,CAAE,CAAC;AAC9D,QAAA,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QAExB,IAAI,IAAI,CAAC,WAAW,EAAE;AACpB,YAAAA,aAAE,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,EAAE,CAAG,EAAA,UAAU,CAAI,EAAA,CAAA,EAAE,CAAC,GAAG,KAAI;AACzD,gBAAA,IAAI,GAAG,EAAE;oBACP,OAAO,CAAC,KAAK,CAAC,CAAA,6BAAA,EAAgC,GAAG,CAAC,OAAO,CAAE,CAAA,CAAC,CAAC;AAC9D,iBAAA;AACH,aAAC,CAAC,CAAC;AACJ,SAAA;KACF;AAED,IAAA,UAAU,CAAC,GAAoB,EAAA;AAC7B,QAAA,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,GAAG,CAAC;QAC5B,IAAI,CAAC,GAAG,CAAC,CAAA,EAAG,MAAM,CAAI,CAAA,EAAA,GAAG,CAAE,CAAA,CAAC,CAAC;KAC9B;AACF;;;;"}