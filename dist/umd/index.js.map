{"version":3,"file":"index.js","sources":["../../src/utils/logger.ts","../../src/utils/cache.ts","../../src/utils/cors.ts","../../src/utils/bundler.ts","../../src/AeroSSR.ts","../../src/utils/errorHandler.ts","../../src/utils/etag.ts","../../src/utils/html.ts"],"sourcesContent":[null,null,null,null,null,null,null,null],"names":["Logger","constructor","options","this","logFilePath","logDir","path","dirname","fs","existsSync","mkdirSync","recursive","accessSync","constants","W_OK","R_OK","error","console","message","log","logMessage","Date","toISOString","appendFile","err","logRequest","req","method","url","createCache","cache","Map","get","key","set","value","clear","setCorsHeaders","res","origins","setHeader","async","resolveDependencies","filePath","deps","Set","has","add","importMatches","readFile","match","depPath","fullPath","resolve","endsWith","generateBundle","projectPath","entryPoint","entryFilePath","join","dependencies","bundle","dep","content","relative","replace","gzipAsync","promisify","gzip","config","port","cacheMaxAge","corsOrigins","compression","bundleCache","templateCache","defaultMeta","title","description","charset","viewport","logger","server","routes","middlewares","use","middleware","push","route","handler","clearCache","executeMiddlewares","index","length","handleRequest","_req","parsedUrl","parseUrl","pathname","writeHead","end","routeHandler","handleDistRequest","query","handleDefaultRequest","statusCode","errorPage","generateErrorPage","handleError","Error","etag","crypto","createHash","update","digest","headers","ETag","acceptEncoding","includes","compressed","htmlPath","__dirname","html","promises","meta","finalMeta","metaTags","injectMetaTags","start","Promise","createServer","listen","stop","close"],"mappings":"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"}